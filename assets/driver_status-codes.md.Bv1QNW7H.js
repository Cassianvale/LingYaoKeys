import{_ as a,c as i,o as t,ag as n}from"./chunks/framework.C48t5LJr.js";const c=JSON.parse('{"title":"状态码说明","description":"","frontmatter":{},"headers":[],"relativePath":"driver/status-codes.md","filePath":"driver/status-codes.md","lastUpdated":1743351716000}'),l={name:"driver/status-codes.md"};function h(e,s,d,p,k,r){return t(),i("div",null,s[0]||(s[0]=[n(`<h1 id="状态码说明" tabindex="-1">状态码说明 <a class="header-anchor" href="#状态码说明" aria-label="Permalink to &quot;状态码说明&quot;">​</a></h1><h2 id="device-status-枚举值" tabindex="-1">DEVICE_STATUS 枚举值 <a class="header-anchor" href="#device-status-枚举值" aria-label="Permalink to &quot;DEVICE_STATUS 枚举值&quot;">​</a></h2><div class="status-code-table"><table tabindex="0"><thead><tr><th>定义</th><th>值</th><th>含义</th></tr></thead><tbody><tr><td>DEVICE_STATUS_UNKNOWN</td><td>0</td><td>设备状态未知，设备刚初始化的状态</td></tr><tr><td>DEVICE_STATUS_READY</td><td>1</td><td>设备就绪，设备初始化完成的状态</td></tr><tr><td>DEVICE_STATUS_ERROR</td><td>2</td><td>设备错误，设备初始化错误的状态</td></tr><tr><td>DEVICE_STATUS_NO_KEYBOARD</td><td>3</td><td>无法找到键盘设备</td></tr><tr><td>DEVICE_STATUS_NO_MOUSE</td><td>4</td><td>无法找到鼠标设备</td></tr><tr><td>DEVICE_STATUS_INIT_FAILED</td><td>5</td><td>初始化失败</td></tr></tbody></table></div><h2 id="详细错误码" tabindex="-1">详细错误码 <a class="header-anchor" href="#详细错误码" aria-label="Permalink to &quot;详细错误码&quot;">​</a></h2><div class="detailed-error-code-table"><table tabindex="0"><thead><tr><th>错误码</th><th>含义</th><th>解决方案</th></tr></thead><tbody><tr><td>1001</td><td>句柄无效错误</td><td>检查驱动初始化状态</td></tr><tr><td>2001</td><td>键盘设备不可用</td><td>检查系统键盘设备是否正常</td></tr><tr><td>3001</td><td>鼠标设备不可用</td><td>检查系统鼠标设备是否正常</td></tr></tbody></table></div><h2 id="错误码说明" tabindex="-1">错误码说明 <a class="header-anchor" href="#错误码说明" aria-label="Permalink to &quot;错误码说明&quot;">​</a></h2><h3 id="驱动加载错误" tabindex="-1">驱动加载错误 <a class="header-anchor" href="#驱动加载错误" aria-label="Permalink to &quot;驱动加载错误&quot;">​</a></h3><div class="error-code-table"><table tabindex="0"><thead><tr><th>错误码</th><th>含义</th><th>解决方案</th></tr></thead><tbody><tr><td>0x0001</td><td>驱动文件不存在</td><td>检查驱动文件路径</td></tr><tr><td>0x0002</td><td>驱动签名无效</td><td>验证驱动签名</td></tr><tr><td>0x0003</td><td>驱动版本不匹配</td><td>更新驱动版本</td></tr><tr><td>0x0004</td><td>系统不支持</td><td>检查系统版本</td></tr></tbody></table></div><h3 id="设备操作错误" tabindex="-1">设备操作错误 <a class="header-anchor" href="#设备操作错误" aria-label="Permalink to &quot;设备操作错误&quot;">​</a></h3><div class="error-code-table"><table tabindex="0"><thead><tr><th>错误码</th><th>含义</th><th>解决方案</th></tr></thead><tbody><tr><td>0x0101</td><td>设备未就绪</td><td>检查设备状态</td></tr><tr><td>0x0102</td><td>设备忙</td><td>等待设备空闲</td></tr><tr><td>0x0103</td><td>设备未连接</td><td>检查设备连接</td></tr><tr><td>0x0104</td><td>设备响应超时</td><td>检查设备状态</td></tr></tbody></table></div><h3 id="参数错误" tabindex="-1">参数错误 <a class="header-anchor" href="#参数错误" aria-label="Permalink to &quot;参数错误&quot;">​</a></h3><div class="error-code-table"><table tabindex="0"><thead><tr><th>错误码</th><th>含义</th><th>解决方案</th></tr></thead><tbody><tr><td>0x0201</td><td>参数无效</td><td>检查参数值</td></tr><tr><td>0x0202</td><td>参数超出范围</td><td>调整参数范围</td></tr><tr><td>0x0203</td><td>参数类型不匹配</td><td>检查参数类型</td></tr><tr><td>0x0204</td><td>参数缺失</td><td>补充必要参数</td></tr></tbody></table></div><h3 id="系统错误" tabindex="-1">系统错误 <a class="header-anchor" href="#系统错误" aria-label="Permalink to &quot;系统错误&quot;">​</a></h3><div class="error-code-table"><table tabindex="0"><thead><tr><th>错误码</th><th>含义</th><th>解决方案</th></tr></thead><tbody><tr><td>0x0301</td><td>内存不足</td><td>释放系统资源</td></tr><tr><td>0x0302</td><td>系统资源不足</td><td>检查系统资源</td></tr><tr><td>0x0303</td><td>权限不足</td><td>检查用户权限</td></tr><tr><td>0x0304</td><td>系统不支持</td><td>检查系统要求</td></tr></tbody></table></div><h2 id="状态检查" tabindex="-1">状态检查 <a class="header-anchor" href="#状态检查" aria-label="Permalink to &quot;状态检查&quot;">​</a></h2><h3 id="驱动状态检查" tabindex="-1">驱动状态检查 <a class="header-anchor" href="#驱动状态检查" aria-label="Permalink to &quot;驱动状态检查&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DEVICE_STATUS status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetDriverStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (status) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DEVICE_STATUS_UNKNOWN:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 设备未初始化</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DEVICE_STATUS_READY:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 设备就绪</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DEVICE_STATUS_ERROR:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 设备错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DEVICE_STATUS_NO_KEYBOARD:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 键盘设备不可用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DEVICE_STATUS_NO_MOUSE:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 鼠标设备不可用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DEVICE_STATUS_INIT_FAILED:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 初始化失败</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="获取详细错误码" tabindex="-1">获取详细错误码 <a class="header-anchor" href="#获取详细错误码" aria-label="Permalink to &quot;获取详细错误码&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取详细错误码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detailedError </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetDetailedErrorCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 处理错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (detailedError) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 处理句柄无效错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 处理键盘设备不可用错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 处理鼠标设备不可用错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="错误处理" tabindex="-1">错误处理 <a class="header-anchor" href="#错误处理" aria-label="Permalink to &quot;错误处理&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取错误码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DWORD error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetLastError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 处理错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 错误处理逻辑</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 0x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 处理驱动文件不存在错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 0x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0002</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 处理驱动签名无效错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ... 其他错误处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="调试建议" tabindex="-1">调试建议 <a class="header-anchor" href="#调试建议" aria-label="Permalink to &quot;调试建议&quot;">​</a></h2><h3 id="状态监控" tabindex="-1">状态监控 <a class="header-anchor" href="#状态监控" aria-label="Permalink to &quot;状态监控&quot;">​</a></h3><ul><li>定期检查设备状态</li><li>记录状态变化</li><li>分析错误原因</li></ul><h3 id="错误恢复" tabindex="-1">错误恢复 <a class="header-anchor" href="#错误恢复" aria-label="Permalink to &quot;错误恢复&quot;">​</a></h3><ul><li>实现错误重试机制</li><li>提供错误恢复方案</li><li>记录错误日志</li></ul><h3 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-label="Permalink to &quot;性能优化&quot;">​</a></h3><ul><li>避免频繁状态检查</li><li>优化错误处理流程</li><li>合理设置超时时间</li></ul>`,28)]))}const o=a(l,[["render",h]]);export{c as __pageData,o as default};
